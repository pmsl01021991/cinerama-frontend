<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cinerama</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/Login.css" />
    <link rel="stylesheet" href="css/logo.css" />

    <!-- Scripts propios -->
    <script src="js/script.js" defer></script>
    <!-- Guard de sesi贸n + toggles de elementos admin -->
    <script src="js/auth.js" defer></script>
    </head>
    <body>
    <!-- Header -->
    <header>
        <div class="logo" id="logo-cinerama">CINERAMA</div>

        <!-- Bot贸n Hamburguesa -->
        <div class="hamburger" id="hamburger">&#9776;</div>

        <nav id="nav-menu">
        <ul>
            <li><a href="#cines">Cine</a></li>
            <li><a href="cartelera.html">Cartelera</a></li>
            <li><a href="estrenos.html">Estrenos</a></li>
            <li><a href="contacto.html">Cont谩ctenos</a></li>

            <!-- SOLO ADMIN: visible cuando adminLogeado === "true" -->
            <li><a href="reservaciones.html" data-admin-only hidden>Panel (Admin)</a></li>
            <li><button id="cerrarSesionBtn" data-admin-only hidden style="border:0;background:#111;color:#fff;border-radius:8px;padding:6px 12px;cursor:pointer;">Salir</button></li>

            <!-- Link de login: se oculta cuando hay sesi贸n -->
            <li><a href="login.html" id="loginLink">Iniciar Sesi贸n</a></li>
        </ul>
        </nav>
    </header>

    <!-- Slider -->
    <section class="slider">
        <div class="slide active">
        <img src="imagenes/banner1.jpg" alt="Banner 1" />
        </div>
        <div class="slide">
        <img src="imagenes/banner2.webp" alt="Banner 2" />
        </div>
        <div class="slide">
        <img src="imagenes/banner3.jpg" alt="Banner 3" />
        </div>
    </section>

    <!-- Secci贸n Nuestros Cines -->
    <section id="cines">
        <h2>Nuestros Cines</h2>

        <!-- Cine 1 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA PACIFICO</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_pacifico.jpg" alt="Cinerama Pacifico" />
            </div>
            <div class="cine-info">
            <p>AV JOSE PARDO 121 MIRAFLORES - LIMA - LIMA</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA PACIFICO">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 2 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA MINKA</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_minka.jpg" alt="Cinerama Minka" />
            </div>
            <div class="cine-info">
            <p>AV ARGENTINA 3093 CC MINKA 2DO NIVEL CALLAO</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA MINKA">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 3 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA CHIMBOTE</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_chimbote.jpg" alt="Cinerama Chimbote" />
            </div>
            <div class="cine-info">
            <p>AV. V. RAUL H. DE LA TORRE MEGA PLAZA CHIMBOTE</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA CHIMBOTE">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 4 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA QUINDE</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_quinde.jpg" alt="Cinerama Quinde" />
            </div>
            <div class="cine-info">
            <p>AV LOS MAESTROS S/N CC EL QUINDE</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA QUINDE">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 5 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA TARAPOTO</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_tarapoto.jpg" alt="Cinerama Tarapoto" />
            </div>
            <div class="cine-info">
            <p>AV ALFONSO UGARTE 1360 TARAPOTO</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA TARAPOTO">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 6 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA CAJAMARCA</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_cajamarca.jpg" alt="Cinerama Cajamarca" />
            </div>
            <div class="cine-info">
            <p>JR SOR MANUELA GIL 151 CC EL QUINDE CAJAMARCA</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA CAJAMARCA">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 7 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA SOL</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_sol.jpg" alt="Cinerama Sol" />
            </div>
            <div class="cine-info">
            <p>AV SAN MARTIN 727 CC PLAZA DEL SOL ICA - ICA - ICA</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA SOL">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 8 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA HUACHO</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_huacho.jpg" alt="Cinerama Huacho" />
            </div>
            <div class="cine-info">
            <p>COLON 601 CC PLAZA DEL SOL 2DO NIVEL</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA HUACHO">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 9 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA MOYOBAMBA</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_moyobamba.jpg" alt="Cinerama Moyobamba" />
            </div>
            <div class="cine-info">
            <p>JR MANUEL DEL AGUILA 542 MOYOBAMBA</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA MOYOBAMBA">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 10 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA CUZCO</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_cuzco.jpg" alt="Cinerama Cuzco" />
            </div>
            <div class="cine-info">
            <p>CALLE CRUZ VERDE 347 CC IMPERIAL PLAZA CUSCO</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA CUZCO">VER CARTELERA</a>

            </div>
        </div>
        </div>

        <!-- Cine 11 -->
        <div class="cine-card">
        <div class="cine-header">CINERAMA PIURA</div>
        <div class="cine-body">
            <div class="cine-image">
            <img src="imagenes/cine_piura.jpg" alt="Cinerama Piura" />
            </div>
            <div class="cine-info">
            <p>AV GRAU 1460 CC. PLAZA DEL SOL</p>
            <!-- CAMBIO: Bot贸n "VER CARTELERA" con data-cine -->
            <a href="cartelera.html" class="btn-cartelera" data-cine="CINERAMA PIURA">VER CARTELERA</a>

            </div>
        </div>
        </div>
    </section>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const botones = document.querySelectorAll(".btn-cartelera");

        botones.forEach(boton => {
            boton.addEventListener("click", async (e) => {
                e.preventDefault(); // evitamos que cambie de p谩gina antes de guardar

                const cineSeleccionado = boton.getAttribute("data-cine");
                if (!cineSeleccionado) return;

                try {
                    // 1. Guardar cine en BD (crear reserva)
                    const resp = await fetch("http://localhost:3001/api/reservas", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ cine: cineSeleccionado })
                    });

                    if (!resp.ok) {
                        throw new Error("Error al crear reserva");
                    }

                    const data = await resp.json();

                    // 2. Guardar en localStorage el id de la reserva y el cine
                    localStorage.setItem("reservaId", data.id);
                    localStorage.setItem("cineSeleccionado", cineSeleccionado);

                    console.log("Reserva creada con ID:", data.id);

                    // 3. Redirigir a cartelera
                    window.location.href = "cartelera.html";
                } catch (err) {
                    console.error(err);
                    alert("No se pudo crear la reserva. Intenta de nuevo.");
                }
            });
        });
    });
    </script>



    <!-- Toast de acceso restringido (se dispara desde login.js) -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
        if (localStorage.getItem("showRestrictedToast") === "true") {
            localStorage.removeItem("showRestrictedToast");
            const toast = document.createElement("div");
            toast.textContent = "锔 Cuidado: acceso restringido";
            toast.style.position = "fixed";
            toast.style.top = "20px";
            toast.style.left = "50%";
            toast.style.transform = "translateX(-50%)";
            toast.style.background = "#ff4d4d";
            toast.style.color = "white";
            toast.style.padding = "14px 28px";
            toast.style.borderRadius = "10px";
            toast.style.fontFamily = "Arial, sans-serif";
            toast.style.fontSize = "16px";
            toast.style.fontWeight = "bold";
            toast.style.boxShadow = "0 4px 12px rgba(0,0,0,0.2)";
            toast.style.zIndex = "9999";
            toast.style.opacity = "0";
            toast.style.transition = "opacity 0.5s ease, transform 0.5s ease";
            document.body.appendChild(toast);
            requestAnimationFrame(() => {
            toast.style.opacity = "1";
            toast.style.transform = "translateX(-50%) translateY(0)";
            });
            setTimeout(() => {
            toast.style.opacity = "0";
            toast.style.transform = "translateX(-50%) translateY(-20px)";
            setTimeout(() => toast.remove(), 500);
            }, 3000);
        }
        });
    </script>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
        <div class="footer-section">
            <h3>Redes Sociales</h3>
            <ul class="social-links">
            <li><a href="https://www.facebook.com/" target="_blank">Facebook</a></li>
            <li><a href="https://www.facebook.com/TwitterInc/?locale=es_LA" target="_blank">Twitter</a></li>
            <li><a href="https://www.instagram.com/accounts/login/?source=auth_switcher&locale=es_ES" target="_blank">Instagram</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>Contacto</h3>
            <p> Tel茅fono: <a href="tel:967356714">967356714</a></p>
            <p> Email: <a href="mailto:info@empresa.com">info@empresa.com</a></p>
            <p> Direcci贸n: Calle Ejemplo 123, Ciudad, Pa铆s</p>
        </div>

        <div class="footer-section">
            <h3>Enlaces R谩pidos</h3>
            <ul class="quick-links">
            <li><a href="#inicio" class="scroll-suave">Inicio</a></li>
            
            </ul>
        </div>
        </div>

        <div class="footer-bottom">
        <b>
            <marquee><p>&copy; 2025 Mi Empresa. Todos los derechos son reservados.</p></marquee>
        </b>
        </div>
    </footer>

    <!-- Toast container -->
    <div id="toast" class="toast"></div>
    </body>
    </html>
